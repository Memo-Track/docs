<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul.nav-list:first-child > li:not(:nth-child(4)) > a, .site-nav > ul.nav-list:first-child > li > ul > li a { background-image: none; } .site-nav > ul.nav-list:not(:first-child) a, .site-nav li.external a { background-image: none; } .site-nav > ul.nav-list:first-child > li:nth-child(4) > a { font-weight: 600; text-decoration: none; } .site-nav > ul.nav-category-list > li > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(4) > button svg { transform: rotate(-90deg); } .site-nav > ul.nav-category-list > li.nav-list-item > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(4) > ul.nav-list { display: block; } </style> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>React App Docs | MemoTrack - docs</title> <meta name="generator" content="Jekyll v4.4.1" /> <meta property="og:title" content="React App Docs" /> <meta property="og:locale" content="en_US" /> <link rel="canonical" href="http://localhost:4000/react-webview-frontend-docs.html" /> <meta property="og:url" content="http://localhost:4000/react-webview-frontend-docs.html" /> <meta property="og:site_name" content="MemoTrack - docs" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="React App Docs" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","headline":"React App Docs","url":"http://localhost:4000/react-webview-frontend-docs.html"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/" class="site-title lh-tight"> MemoTrack - docs </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">Index</a></li><li class="nav-list-item"><a href="/backend-docs.html" class="nav-list-link">Backend Docs</a></li><li class="nav-list-item"><a href="/flutter-app-docs.html" class="nav-list-link">Flutter App Docs</a></li><li class="nav-list-item"><a href="/react-webview-frontend-docs.html" class="nav-list-link">React App Docs</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in User Manual category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/usermanual/" class="nav-list-link">User Manual</a><ul class="nav-list"><li class="nav-list-item"><a href="/usermanual/admin.html" class="nav-list-link">Admin Workflow</a></li><li class="nav-list-item"><a href="/usermanual/approver.html" class="nav-list-link">Approver Workflow</a></li><li class="nav-list-item"><a href="/usermanual/common.html" class="nav-list-link">Common Workflow</a></li><li class="nav-list-item"><a href="/usermanual/nurse.html" class="nav-list-link">Nurse Workflow</a></li></ul></li></ul> <div class="nav-category"></div> <ul class="nav-list"></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search MemoTrack - docs" aria-label="Search MemoTrack - docs" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div class="main-content-wrap"> <div id="main-content" class="main-content"> <main> <p>The MemoTrack application’s frontend is a <strong>React single-page application (SPA)</strong> designed as a Software-as-a-Service (SaaS) solution for hospitals [Documentation - React App too]. The React app is built using <strong>Create React App</strong>.</p> <h3 id="getting-started-and-development"> <a href="#getting-started-and-development" class="anchor-heading" aria-labelledby="getting-started-and-development"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Getting Started and Development </h3> <p>The React app is bootstrapped with Create React App, providing standard scripts for development and deployment.</p> <ul> <li><strong><code class="language-plaintext highlighter-rouge">npm start</code></strong>: Runs the application in development mode, typically accessible at <code class="language-plaintext highlighter-rouge">http://localhost:3000</code>. The page automatically reloads upon code changes.</li> <li><strong><code class="language-plaintext highlighter-rouge">npm run build</code></strong>: Compiles the application for production, generating a minified and optimised build in the <code class="language-plaintext highlighter-rouge">build</code> folder. This output is ready for deployment.</li> </ul> <h3 id="core-architecture-and-technologies"> <a href="#core-architecture-and-technologies" class="anchor-heading" aria-labelledby="core-architecture-and-technologies"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Core Architecture and Technologies </h3> <p>The React frontend follows a “hospital-first” architecture and leverages modern web technologies for a responsive and secure experience.</p> <ul> <li><strong>Hospital-First Architecture</strong>: <ul> <li>The application initiates with <strong>hospital selection</strong>.</li> <li>Information about the <strong>selected hospital</strong> is stored in <code class="language-plaintext highlighter-rouge">localStorage</code> and is crucial for subsequent login attempts and all API requests.</li> </ul> </li> <li><strong>Authentication and User Management</strong>: <ul> <li>Authentication is <strong>JWT-based</strong>, interacting with the Django REST Framework backend.</li> <li>Upon successful login, the <code class="language-plaintext highlighter-rouge">authToken</code>, user roles, and profile data are <strong>stored in <code class="language-plaintext highlighter-rouge">localStorage</code></strong> for persistence.</li> <li>An Axios interceptor is configured to automatically <strong>attach the authentication token</strong> to all outgoing API requests.</li> <li>The <code class="language-plaintext highlighter-rouge">AuthContext</code> and <code class="language-plaintext highlighter-rouge">useAuth</code> custom hook manage the user, hospital, and token states, facilitating global access to authentication status and user roles (e.g., <code class="language-plaintext highlighter-rouge">isSuperuser</code>, <code class="language-plaintext highlighter-rouge">isApprover</code>, <code class="language-plaintext highlighter-rouge">isResponder</code>, <code class="language-plaintext highlighter-rouge">isCreator</code>, <code class="language-plaintext highlighter-rouge">isRaiser</code>).</li> </ul> </li> <li><strong>Role-Based Routing</strong>: <ul> <li>After authentication, the application routes users based on their assigned roles, using flags such as <code class="language-plaintext highlighter-rouge">is_super_user</code>, <code class="language-plaintext highlighter-rouge">is_approver</code>, <code class="language-plaintext highlighter-rouge">is_responder</code>, and <code class="language-plaintext highlighter-rouge">is_raiser</code>.</li> <li>The current implementation prioritises the <strong><code class="language-plaintext highlighter-rouge">superuser</code> dashboard</strong>, with other role-specific pages serving as placeholders for future expansion.</li> </ul> </li> <li><strong>Styling and UI Components</strong>: <ul> <li>The application uses <strong>Tailwind CSS</strong> for utility-first styling and ensures <strong>responsiveness</strong> across desktop, tablet, and mobile screens.</li> <li>UI components are built using <strong>Mantine</strong>, including packages like <code class="language-plaintext highlighter-rouge">@mantine/core</code>, <code class="language-plaintext highlighter-rouge">@mantine/hooks</code>, and <code class="language-plaintext highlighter-rouge">@mantine/notifications</code>.</li> <li>Icons are provided by <strong>Lucide React</strong>.</li> </ul> </li> <li><strong>Page Structure and Routing</strong>: <ul> <li>Key pages include: <ul> <li><strong>Login Page (<code class="language-plaintext highlighter-rouge">LoginPage.jsx</code>)</strong>: Handles user authentication and allows users to set new passwords.</li> <li><strong>Dashboard Content (<code class="language-plaintext highlighter-rouge">DashboardContent.jsx</code>)</strong>: Provides administrative interfaces for managing users, roles, blocks, approver hierarchies, and shifts.</li> <li><strong>Memos Page (<code class="language-plaintext highlighter-rouge">MemosPage.jsx</code>)</strong>: Displays a list of memos.</li> <li><strong>Memo Detail Page (<code class="language-plaintext highlighter-rouge">MemoDetail.jsx</code>)</strong>: Shows detailed information about a specific memo.</li> <li><strong>Ward Manager (<code class="language-plaintext highlighter-rouge">WardManager.jsx</code>)</strong>: Manages wards associated with a particular block.</li> </ul> </li> <li>Client-side routing is configured via the <code class="language-plaintext highlighter-rouge">.htaccess</code> file to redirect specific paths (e.g., <code class="language-plaintext highlighter-rouge">/users</code>, <code class="language-plaintext highlighter-rouge">/roles</code>, <code class="language-plaintext highlighter-rouge">/blocks</code>, <code class="language-plaintext highlighter-rouge">/shifts</code>, <code class="language-plaintext highlighter-rouge">/hierarchies</code>, <code class="language-plaintext highlighter-rouge">/memos</code>, <code class="language-plaintext highlighter-rouge">/memo/:memoId</code>, <code class="language-plaintext highlighter-rouge">/wards/:blockId</code>) to <code class="language-plaintext highlighter-rouge">index.html</code>.</li> </ul> </li> <li><strong>Code Structure</strong>: <ul> <li>The recommended project structure for the frontend includes <code class="language-plaintext highlighter-rouge">src/api/</code> for Axios client and API calls, <code class="language-plaintext highlighter-rouge">src/auth/</code> for login/logout logic, <code class="language-plaintext highlighter-rouge">src/context/</code> for Auth and hospital context, <code class="language-plaintext highlighter-rouge">src/pages/</code> for page components, <code class="language-plaintext highlighter-rouge">src/routes/</code> for role-based routing, and <code class="language-plaintext highlighter-rouge">src/utils/</code> for helper functions.</li> <li>The current file structure organises components, contexts, hooks, services, and utilities within the <code class="language-plaintext highlighter-rouge">src/</code> directory.</li> </ul> </li> <li><strong>API Client</strong>: <ul> <li>An <code class="language-plaintext highlighter-rouge">ApiService</code> class centralises all backend API interactions.</li> <li>It supports standard HTTP methods (GET, POST, PATCH, DELETE) and manages the <code class="language-plaintext highlighter-rouge">Authorization</code> header with the authentication token.</li> <li>The <code class="language-plaintext highlighter-rouge">baseURL</code> for API requests is configured via environment variables (<code class="language-plaintext highlighter-rouge">process.env.BACKEND_URL</code>) or defaults to <code class="language-plaintext highlighter-rouge">https://app.memotrack.net/</code>.</li> </ul> </li> <li><strong>State Management and Hooks</strong>: <ul> <li>Beyond <code class="language-plaintext highlighter-rouge">AuthContext</code>, the application uses various custom React Hooks: <ul> <li><strong><code class="language-plaintext highlighter-rouge">useCrud</code></strong>: Simplifies Create, Read, Update, and Delete operations for different entities by abstracting API calls.</li> <li><strong><code class="language-plaintext highlighter-rouge">useForm</code></strong>: Manages form state, handles changes, blur events, and validates input fields based on defined schemas.</li> <li><strong><code class="language-plaintext highlighter-rouge">useFlutter</code></strong>: Provides context for communication with the Flutter environment when the React app is embedded within a WebView.</li> </ul> </li> </ul> </li> </ul> <h3 id="integration-with-flutter"> <a href="#integration-with-flutter" class="anchor-heading" aria-labelledby="integration-with-flutter"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Integration with Flutter </h3> <p>The React frontend is designed to be seamlessly embedded and interact with a Flutter mobile application via a WebView.</p> <ul> <li><strong>Data Injection</strong>: When loaded in Flutter, the React app receives a <code class="language-plaintext highlighter-rouge">source=flutter</code> query parameter. The Flutter app injects user and authentication data (user details, hospital info, <code class="language-plaintext highlighter-rouge">authToken</code>, and <code class="language-plaintext highlighter-rouge">flutter_version</code>) into the React app’s <code class="language-plaintext highlighter-rouge">localStorage</code> via a <code class="language-plaintext highlighter-rouge">memo_user_ready</code> event.</li> <li><strong>Communication Channels</strong>: A <code class="language-plaintext highlighter-rouge">ReactToFlutter</code> JavaScript channel enables the React app to send messages back to the Flutter host, supporting actions like <code class="language-plaintext highlighter-rouge">updateUser</code>, <code class="language-plaintext highlighter-rouge">showMessage</code>, and <code class="language-plaintext highlighter-rouge">uploadImage</code> (for memos).</li> </ul> <h3 id="important-considerations-for-developers"> <a href="#important-considerations-for-developers" class="anchor-heading" aria-labelledby="important-considerations-for-developers"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Important Considerations for Developers </h3> <ul> <li><strong><code class="language-plaintext highlighter-rouge">localStorage</code> Check</strong>: Always verify the presence of existing hospital and user data in <code class="language-plaintext highlighter-rouge">localStorage</code> before determining navigation routes.</li> <li><strong>Development Focus</strong>: Initial development efforts should concentrate on implementing <strong>hospital selection</strong>, the <strong>login process</strong>, and the <strong>superuser dashboard</strong>. Other role-specific features can be added later as “Coming Soon” functionalities.</li> </ul> <p>Here is a comprehensive documentation of the files and directories within the <code class="language-plaintext highlighter-rouge">frontend/app/src/</code> directory of the React application:</p> <h3 id="src-directory-structure-overview"> <a href="#src-directory-structure-overview" class="anchor-heading" aria-labelledby="src-directory-structure-overview"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <code class="language-plaintext highlighter-rouge">src/</code> Directory Structure Overview </h3> <p>The <code class="language-plaintext highlighter-rouge">src/</code> directory is the core of the React application, organising its components, state management, API interactions, and utility functions into logical folders.</p> <ul> <li><code class="language-plaintext highlighter-rouge">src/App.css</code></li> <li><code class="language-plaintext highlighter-rouge">src/App.js</code></li> <li><code class="language-plaintext highlighter-rouge">src/App.test.js</code></li> <li><code class="language-plaintext highlighter-rouge">src/index.css</code></li> <li><code class="language-plaintext highlighter-rouge">src/index.js</code></li> <li><code class="language-plaintext highlighter-rouge">src/output.css</code></li> <li><code class="language-plaintext highlighter-rouge">src/reportWebVitals.js</code></li> <li><code class="language-plaintext highlighter-rouge">src/setupTests.js</code></li> <li><code class="language-plaintext highlighter-rouge">src/components/</code></li> <li><code class="language-plaintext highlighter-rouge">src/contexts/</code></li> <li><code class="language-plaintext highlighter-rouge">src/hooks/</code></li> <li><code class="language-plaintext highlighter-rouge">src/services/</code></li> <li><code class="language-plaintext highlighter-rouge">src/utils/</code></li> </ul><hr /> <h3 id="individual-file-and-folder-documentation"> <a href="#individual-file-and-folder-documentation" class="anchor-heading" aria-labelledby="individual-file-and-folder-documentation"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Individual File and Folder Documentation: </h3> <h4 id="root-level-files-in-src"> <a href="#root-level-files-in-src" class="anchor-heading" aria-labelledby="root-level-files-in-src"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <strong>Root Level Files in <code class="language-plaintext highlighter-rouge">src/</code></strong> </h4> <ol> <li><strong><code class="language-plaintext highlighter-rouge">App.css</code></strong> <ul> <li><strong>Purpose</strong>: Contains standard CSS styles for the main <code class="language-plaintext highlighter-rouge">App</code> component. It includes basic styling for the app’s logo, header, and links.</li> <li><strong>Details</strong>: Defines animations (e.g., <code class="language-plaintext highlighter-rouge">App-logo-spin</code>) and responsive styles using media queries.</li> <li><strong>Usage</strong>: Imported by <code class="language-plaintext highlighter-rouge">App.js</code>.</li> </ul> </li> <li><strong><code class="language-plaintext highlighter-rouge">App.js</code></strong> <ul> <li><strong>Purpose</strong>: This is the <strong>main entry point</strong> for the React application’s routing and a central orchestrator for core functionalities like authentication and Flutter integration.</li> <li><strong>Key Functionality</strong>: <ul> <li><strong>Routing</strong>: Uses <code class="language-plaintext highlighter-rouge">react-router-dom</code> to define client-side routes, including <code class="language-plaintext highlighter-rouge">/</code> (dashboard), <code class="language-plaintext highlighter-rouge">/users</code>, <code class="language-plaintext highlighter-rouge">/roles</code>, <code class="language-plaintext highlighter-rouge">/blocks</code>, <code class="language-plaintext highlighter-rouge">/shifts</code>, <code class="language-plaintext highlighter-rouge">/hierarchies</code>, <code class="language-plaintext highlighter-rouge">/memos</code>, <code class="language-plaintext highlighter-rouge">/memo/:memoId</code>, and <code class="language-plaintext highlighter-rouge">/wards/:blockId</code>.</li> <li><strong>Authentication</strong>: Utilises <code class="language-plaintext highlighter-rouge">AuthContext</code> and the <code class="language-plaintext highlighter-rouge">useAuth</code> hook to determine if a user is authenticated. It conditionally renders the <code class="language-plaintext highlighter-rouge">LoginPage</code> or the <code class="language-plaintext highlighter-rouge">DashboardLayout</code> based on the authentication status.</li> <li><strong>Flutter Integration</strong>: Employs <code class="language-plaintext highlighter-rouge">useFlutterBridge</code> to detect if the app is embedded within a Flutter WebView (via <code class="language-plaintext highlighter-rouge">?source=flutter</code> query parameter) and handles the injection of user data from Flutter into <code class="language-plaintext highlighter-rouge">localStorage</code> upon a <code class="language-plaintext highlighter-rouge">memo_user_ready</code> event.</li> </ul> </li> <li><strong>Dependencies</strong>: Imports from <code class="language-plaintext highlighter-rouge">react-router-dom</code>, <code class="language-plaintext highlighter-rouge">react-hot-toast</code>, <code class="language-plaintext highlighter-rouge">AuthContext</code>, <code class="language-plaintext highlighter-rouge">FlutterContext</code>, <code class="language-plaintext highlighter-rouge">useAuth</code>, <code class="language-plaintext highlighter-rouge">LoginPage</code>, <code class="language-plaintext highlighter-rouge">DashboardLayout</code>, <code class="language-plaintext highlighter-rouge">WardManager</code>, <code class="language-plaintext highlighter-rouge">MemosPage</code>, <code class="language-plaintext highlighter-rouge">MemoDetail</code>.</li> </ul> </li> <li><strong><code class="language-plaintext highlighter-rouge">App.test.js</code></strong> <ul> <li><strong>Purpose</strong>: Contains boilerplate unit tests for the <code class="language-plaintext highlighter-rouge">App</code> component, typically generated by Create React App.</li> <li><strong>Details</strong>: Uses <code class="language-plaintext highlighter-rouge">@testing-library/react</code> and <code class="language-plaintext highlighter-rouge">@testing-library/jest-dom</code> for testing React components.</li> </ul> </li> <li><strong><code class="language-plaintext highlighter-rouge">index.css</code></strong> <ul> <li><strong>Purpose</strong>: Imports the Tailwind CSS framework, indicating that the application uses a utility-first approach for styling.</li> <li><strong>Usage</strong>: Imported by <code class="language-plaintext highlighter-rouge">index.js</code> to apply global styles.</li> </ul> </li> <li><strong><code class="language-plaintext highlighter-rouge">index.js</code></strong> <ul> <li><strong>Purpose</strong>: The primary JavaScript entry point for the entire React application. It renders the root React component (<code class="language-plaintext highlighter-rouge">MemoTrackApp</code>) into the HTML DOM.</li> <li><strong>Key Functionality</strong>: <ul> <li><strong>React DOM Rendering</strong>: Uses <code class="language-plaintext highlighter-rouge">ReactDOM.createRoot</code> to render the application.</li> <li><strong>Mantine Provider</strong>: Wraps the application with <code class="language-plaintext highlighter-rouge">MantineProvider</code> to enable Mantine UI components and hooks, which are used for building the user interface.</li> <li><strong>Web Vitals Reporting</strong>: Integrates <code class="language-plaintext highlighter-rouge">reportWebVitals</code> for performance measurement.</li> </ul> </li> <li><strong>Dependencies</strong>: Imports <code class="language-plaintext highlighter-rouge">React</code>, <code class="language-plaintext highlighter-rouge">ReactDOM</code>, <code class="language-plaintext highlighter-rouge">index.css</code>, <code class="language-plaintext highlighter-rouge">MemoTrackApp</code>, <code class="language-plaintext highlighter-rouge">reportWebVitals</code>, and <code class="language-plaintext highlighter-rouge">MantineProvider</code>.</li> </ul> </li> <li><strong><code class="language-plaintext highlighter-rouge">output.css</code></strong> <ul> <li><strong>Purpose</strong>: This file is typically the <strong>compiled output</strong> of Tailwind CSS, containing all the generated utility classes and base styles used in the application.</li> <li><strong>Details</strong>: It includes definitions for colours (e.g., <code class="language-plaintext highlighter-rouge">var(--color-red-50)</code>), spacing (<code class="language-plaintext highlighter-rouge">var(--spacing)</code>), font families, and various utility classes like <code class="language-plaintext highlighter-rouge">mt-6</code>, <code class="language-plaintext highlighter-rouge">flex</code>, <code class="language-plaintext highlighter-rouge">bg-red-50</code>, <code class="language-plaintext highlighter-rouge">text-center</code>, and responsive breakpoints (<code class="language-plaintext highlighter-rouge">sm:</code>, <code class="language-plaintext highlighter-rouge">md:</code>, <code class="language-plaintext highlighter-rouge">lg:</code>).</li> </ul> </li> <li><strong><code class="language-plaintext highlighter-rouge">reportWebVitals.js</code></strong> <ul> <li><strong>Purpose</strong>: A utility file for measuring and reporting core web vitals (CLS, FID, FCP, LCP, TTFB), crucial for performance monitoring.</li> <li><strong>Usage</strong>: Integrated into <code class="language-plaintext highlighter-rouge">index.js</code>.</li> </ul> </li> <li><strong><code class="language-plaintext highlighter-rouge">setupTests.js</code></strong> <ul> <li><strong>Purpose</strong>: Configuration file for Jest and React Testing Library, often used to extend Jest’s matchers for DOM assertions.</li> <li><strong>Details</strong>: Imports <code class="language-plaintext highlighter-rouge">@testing-library/jest-dom</code>.</li> </ul> </li> </ol><hr /> <h4 id="srccomponents-directory"> <a href="#srccomponents-directory" class="anchor-heading" aria-labelledby="srccomponents-directory"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <strong><code class="language-plaintext highlighter-rouge">src/components/</code> Directory</strong> </h4> <p>This directory houses reusable UI components, organised by their functional area.</p> <ol> <li><strong><code class="language-plaintext highlighter-rouge">src/components/auth/</code></strong> <ul> <li><strong><code class="language-plaintext highlighter-rouge">LoginPage.jsx</code></strong>: <ul> <li><strong>Purpose</strong>: Handles user authentication and allows users to set new passwords.</li> <li><strong>Functionality</strong>: Manages phone number, password, and confirm password states. It interacts with the <code class="language-plaintext highlighter-rouge">useAuth</code> hook to perform login and password setup, displaying loading states and error messages. It can toggle between login and set password forms.</li> </ul> </li> <li><strong><code class="language-plaintext highlighter-rouge">SetPassword.jsx</code></strong>: <ul> <li><strong>Purpose</strong>: Dedicated component for setting a new password.</li> <li><strong>Functionality</strong>: Takes phone number, new password, and confirm password as input. It validates inputs (e.g., passwords matching, minimum length) and calls <code class="language-plaintext highlighter-rouge">apiService.setPassword</code> to update the password. It uses <code class="language-plaintext highlighter-rouge">useNavigate</code> for potential redirection after success.</li> </ul> </li> </ul> </li> <li><strong><code class="language-plaintext highlighter-rouge">src/components/common/</code></strong> <ul> <li><strong><code class="language-plaintext highlighter-rouge">CrudTable.jsx</code></strong>: <ul> <li><strong>Purpose</strong>: A generic table component designed to display and manage data for various entities (e.g., users, roles, blocks) with Create, Read, Update, and Delete (CRUD) actions.</li> <li><strong>Functionality</strong>: Renders data dynamically based on <code class="language-plaintext highlighter-rouge">columns</code> prop, provides “Add”, “Edit”, “Delete”, and “View” buttons, and includes a specific “Manage Wards” link for “Blocks”.</li> <li><strong>Dependencies</strong>: Uses Lucide React icons (<code class="language-plaintext highlighter-rouge">Edit</code>, <code class="language-plaintext highlighter-rouge">Eye</code>, <code class="language-plaintext highlighter-rouge">Plus</code>, <code class="language-plaintext highlighter-rouge">Trash2</code>).</li> </ul> </li> <li><strong><code class="language-plaintext highlighter-rouge">LoadingSpinner.jsx</code></strong>: <ul> <li><strong>Purpose</strong>: A simple component to display a loading message and spinner while data is being fetched or processed.</li> <li><strong>Dependencies</strong>: Uses <code class="language-plaintext highlighter-rouge">Building2</code> icon from Lucide React.</li> </ul> </li> <li><strong><code class="language-plaintext highlighter-rouge">WardSelectDialog.jsx</code></strong>: <ul> <li><strong>Purpose</strong>: A modal dialog for selecting a ward, often used in memo creation or user block/ward switching flows.</li> <li><strong>Functionality</strong>: Fetches and displays wards grouped by block. It supports searching and filtering wards within active blocks. It allows a user to select a ward and confirms their selection before proceeding.</li> </ul> </li> </ul> </li> <li><strong><code class="language-plaintext highlighter-rouge">src/components/dashboard/</code></strong> <ul> <li><strong><code class="language-plaintext highlighter-rouge">DashboardContent.jsx</code></strong>: <ul> <li><strong>Purpose</strong>: Renders the main content of the dashboard based on the <code class="language-plaintext highlighter-rouge">activeTab</code> selected (e.g., ‘users’, ‘roles’, ‘blocks’, ‘shifts’, ‘hierarchies’).</li> <li><strong>Functionality</strong>: Dynamically renders <code class="language-plaintext highlighter-rouge">CrudTable</code> for different entities. It manages modal states for creating and editing items and confirmation dialogs for deletion. Access control is based on <code class="language-plaintext highlighter-rouge">isSuperuser</code> or <code class="language-plaintext highlighter-rouge">isStaff</code> roles.</li> <li><strong>Dependencies</strong>: Uses <code class="language-plaintext highlighter-rouge">useCrud</code> hook for data management and various form components (<code class="language-plaintext highlighter-rouge">UserForm</code>, <code class="language-plaintext highlighter-rouge">RoleForm</code>, etc.).</li> </ul> </li> <li><strong><code class="language-plaintext highlighter-rouge">DashboardIframe.jsx</code></strong>: <ul> <li><strong>Purpose</strong>: Displays precomputed dashboard data fetched from the backend, embedded within an iframe.</li> <li><strong>Functionality</strong>: Constructs the URL for the dashboard JSON data based on <code class="language-plaintext highlighter-rouge">hospitalId</code>, selected period (<code class="language-plaintext highlighter-rouge">today</code>, <code class="language-plaintext highlighter-rouge">week</code>, <code class="language-plaintext highlighter-rouge">month</code>), and selected date. It fetches the JSON data and displays loading/error states. It also includes navigation controls (previous/next period, refresh).</li> </ul> </li> <li><strong><code class="language-plaintext highlighter-rouge">DashboardLayout.jsx</code></strong>: <ul> <li><strong>Purpose</strong>: Provides the overall layout for the authenticated user’s dashboard, including the header, sidebar navigation, and main content area.</li> <li><strong>Functionality</strong>: Manages sidebar open/close state, displays user and hospital information, and handles logout. It uses <code class="language-plaintext highlighter-rouge">useLocation</code> to determine the active tab and passes it down to <code class="language-plaintext highlighter-rouge">Navigation</code> and <code class="language-plaintext highlighter-rouge">Outlet</code> (for nested routes). It also handles Flutter integration awareness by setting <code class="language-plaintext highlighter-rouge">localStorage</code> flags.</li> </ul> </li> <li><strong><code class="language-plaintext highlighter-rouge">Navigation.jsx</code></strong>: <ul> <li><strong>Purpose</strong>: Renders the sidebar navigation links for the dashboard.</li> <li><strong>Functionality</strong>: Displays links for ‘Dashboard’, ‘Memos’, ‘Users’, ‘Roles’, ‘Blocks’, ‘Hierarchies’, ‘Shifts’, and ‘Settings’. The visibility of ‘Users’, ‘Roles’, ‘Blocks’, ‘Hierarchies’, and ‘Shifts’ is conditional based on <code class="language-plaintext highlighter-rouge">isSuperuser</code> or <code class="language-plaintext highlighter-rouge">isStaff</code> roles. It highlights the active tab and provides a mechanism to close the mobile sidebar on navigation item click.</li> </ul> </li> </ul> </li> <li><strong><code class="language-plaintext highlighter-rouge">src/components/forms/</code></strong> <ul> <li>These components are specific forms for creating or editing various entities within the application. They typically use the <code class="language-plaintext highlighter-rouge">useForm</code> hook for input management and validation, and <code class="language-plaintext highlighter-rouge">FormField</code> for rendering individual input elements.</li> <li><strong><code class="language-plaintext highlighter-rouge">ApproverHierarchyForm.jsx</code></strong>: Manages the creation and editing of approver hierarchies, including <code class="language-plaintext highlighter-rouge">is_active</code> status and multiple approval levels with roles and priorities.</li> <li><strong><code class="language-plaintext highlighter-rouge">BlockForm.jsx</code></strong>: Form for creating or editing a block, including name, number of floors, and description.</li> <li><strong><code class="language-plaintext highlighter-rouge">RoleForm.jsx</code></strong>: Form for creating or editing user roles, specifying name, description, and permissions (can approve, respond, create memos).</li> <li><strong><code class="language-plaintext highlighter-rouge">ShiftForm.jsx</code></strong>: Form for creating or editing shifts, including name, start time, end time, and description.</li> <li><strong><code class="language-plaintext highlighter-rouge">UserForm.jsx</code></strong>: Form for creating or editing user accounts, including institution ID, role, and phone number. It dynamically fetches available roles from the API for selection.</li> </ul> </li> <li><strong><code class="language-plaintext highlighter-rouge">src/components/memos/</code></strong> <ul> <li><strong><code class="language-plaintext highlighter-rouge">BackButton.jsx</code></strong>: <ul> <li><strong>Purpose</strong>: A reusable “Back” button component that navigates to the previous page in history or a fallback route if no history is available.</li> </ul> </li> <li><strong><code class="language-plaintext highlighter-rouge">MemoDetail.jsx</code></strong>: <ul> <li><strong>Purpose</strong>: Displays detailed information about a specific memo, including its latest snapshot, hierarchy, and worker status.</li> <li><strong>Functionality</strong>: Fetches memo data using <code class="language-plaintext highlighter-rouge">memoId</code> from URL parameters. It conditionally displays “Edit” button for creators and integrates <code class="language-plaintext highlighter-rouge">MemoInfo</code>, <code class="language-plaintext highlighter-rouge">MemoTimeline</code>, and <code class="language-plaintext highlighter-rouge">WorkerStatus</code> components.</li> </ul> </li> <li><strong><code class="language-plaintext highlighter-rouge">MemoEditForm.jsx</code></strong>: <ul> <li><strong>Purpose</strong>: Form for updating an existing memo, allowing changes to complaint, department, and tagged role.</li> <li><strong>Functionality</strong>: Fetches roles for the “Tagged Role” dropdown and sends a PATCH request to the API to update the memo’s payload.</li> </ul> </li> <li><strong><code class="language-plaintext highlighter-rouge">MemoForm.jsx</code></strong>: <ul> <li><strong>Purpose</strong>: Form for creating a new memo.</li> <li><strong>Functionality</strong>: Guides the user through confirming/changing their current ward, then allows input for complaint, department, and tagging a role. It generates a UUID for the memo and uses <code class="language-plaintext highlighter-rouge">apiService.createMemo</code> to submit. It also interacts with <code class="language-plaintext highlighter-rouge">useFlutter</code> to update user info in the Flutter app if embedded.</li> </ul> </li> <li><strong><code class="language-plaintext highlighter-rouge">MemoInfo.jsx</code></strong>: <ul> <li><strong>Purpose</strong>: Displays general information about a memo from its latest snapshot, grouped into “Request Info” and “User Info” sections.</li> <li><strong>Functionality</strong>: Renders memo details, including complaint, department, tagged role, user role, phone number, block, ward, and floor. It also includes functionality for refreshing OTPs (Attendee and Completion OTPs) for relevant user roles.</li> </ul> </li> <li><strong><code class="language-plaintext highlighter-rouge">MemosPage.jsx</code></strong>: <ul> <li><strong>Purpose</strong>: Displays a list of memos, categorised by user role (creator, approver, responder, admin).</li> <li><strong>Functionality</strong>: Fetches memos using <code class="language-plaintext highlighter-rouge">apiService.getUserMemos</code>. It provides a “Create” button for creators and navigates to <code class="language-plaintext highlighter-rouge">MemoDetail</code> on memo click. It shows a count of active memos and handles loading/error states. It uses <code class="language-plaintext highlighter-rouge">MemoTabbedList</code> for display and <code class="language-plaintext highlighter-rouge">MemoForm</code> for creation.</li> </ul> </li> <li><strong><code class="language-plaintext highlighter-rouge">MemoTimeline.jsx</code></strong>: <ul> <li><strong>Purpose</strong>: Displays the approval timeline/hierarchy for a memo and allows users to approve or reject steps.</li> <li><strong>Functionality</strong>: Renders each step of the approval hierarchy, indicating its status (approved/pending). It provides “Approve” and “Undo Approval” buttons conditionally based on the current user’s role (<code class="language-plaintext highlighter-rouge">currentUserRole</code>, <code class="language-plaintext highlighter-rouge">isCurrentUserSuperuser</code>) and whether they previously approved the step.</li> </ul> </li> <li><strong><code class="language-plaintext highlighter-rouge">PhoneLink.jsx</code></strong>: <ul> <li><strong>Purpose</strong>: Renders a clickable phone number that attempts to initiate a call.</li> <li><strong>Functionality</strong>: Dynamically enables/disables the link based on whether the app is running in a Flutter WebView and the Flutter app’s version (<code class="language-plaintext highlighter-rouge">flutter_version</code>) to ensure proper phone call handling within the mobile environment.</li> </ul> </li> <li><strong><code class="language-plaintext highlighter-rouge">WorkerStatus.jsx</code></strong>: <ul> <li><strong>Purpose</strong>: Displays and allows adding/deleting worker status updates (comments) for a memo, including speech-to-text functionality.</li> <li><strong>Functionality</strong>: Processes raw status data to display it with threading (replies). It provides a modal for adding new updates, which can include comments, status type (<code class="language-plaintext highlighter-rouge">attended</code>, <code class="language-plaintext highlighter-rouge">completed</code>, <code class="language-plaintext highlighter-rouge">incomplete</code>, <code class="language-plaintext highlighter-rouge">tagged</code>), tagged roles, and OTP validation for specific status types (e.g., <code class="language-plaintext highlighter-rouge">completed</code>, first-time comments). It integrates with the Flutter app for speech-to-text capabilities, sending speech commands and receiving results.</li> </ul> </li> </ul> </li> <li><strong><code class="language-plaintext highlighter-rouge">src/components/modals/</code></strong> <ul> <li><strong><code class="language-plaintext highlighter-rouge">ConfirmDialog.jsx</code></strong>: <ul> <li><strong>Purpose</strong>: A generic modal component for displaying confirmation messages before executing a potentially destructive action (e.g., deletion).</li> <li><strong>Functionality</strong>: Takes title, message, confirm/cancel text, and loading state as props.</li> </ul> </li> </ul> </li> <li><strong><code class="language-plaintext highlighter-rouge">src/components/prototype/</code></strong> <ul> <li><strong><code class="language-plaintext highlighter-rouge">MemoExplorer.jsx</code></strong>: <ul> <li><strong>Purpose</strong>: An experimental UI component for exploring memo lists with client-side search and filtering.</li> <li><strong>Functionality</strong>: Organises memos by roles and tabs, offering dynamic filtering options for wards and departments, and a search bar for complaints. Built with Mantine components.</li> </ul> </li> <li><strong><code class="language-plaintext highlighter-rouge">MemoExplorerTW.jsx</code></strong>: <ul> <li><strong>Purpose</strong>: A Tailwind CSS-only version of <code class="language-plaintext highlighter-rouge">MemoExplorer</code> for exploring memo lists, offering the same filtering capabilities without Mantine dependencies.</li> <li><strong>Functionality</strong>: Provides role and tab selectors, search, and filters for ward and department.</li> </ul> </li> <li><strong><code class="language-plaintext highlighter-rouge">MemoTabbedList.jsx</code></strong>: <ul> <li><strong>Purpose</strong>: Displays memos in a tabbed list format, allowing users to filter and search for memos within different categories.</li> <li><strong>Functionality</strong>: Organises memos into tabs (e.g., “All”), provides advanced filtering options by complaint, ward, block, floor, department, and date, and supports searching.</li> </ul> </li> </ul> </li> <li><strong><code class="language-plaintext highlighter-rouge">src/components/ui/</code></strong> <ul> <li><strong><code class="language-plaintext highlighter-rouge">Checkbox.jsx</code></strong>: A reusable checkbox input component with a label.</li> <li><strong><code class="language-plaintext highlighter-rouge">FormField.jsx</code></strong>: A versatile component for rendering various input types (text, select, textarea, time) with integrated labels, error display, and required indicators.</li> <li><strong><code class="language-plaintext highlighter-rouge">Modal.jsx</code></strong>: A generic modal component for displaying content in a pop-up window, supporting different sizes.</li> </ul> </li> <li><strong><code class="language-plaintext highlighter-rouge">src/components/wards/</code></strong> <ul> <li><strong><code class="language-plaintext highlighter-rouge">WardManager.jsx</code></strong>: <ul> <li><strong>Purpose</strong>: Manages wards associated with a particular block.</li> <li><strong>Functionality</strong>: Fetches and displays wards for a given <code class="language-plaintext highlighter-rouge">blockId</code>. Allows adding new wards (with name and floor) and deleting existing ones. Wards are grouped and sortable by floor, with an expand/collapse feature.</li> </ul> </li> </ul> </li> </ol><hr /> <h4 id="srccontexts-directory"> <a href="#srccontexts-directory" class="anchor-heading" aria-labelledby="srccontexts-directory"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <strong><code class="language-plaintext highlighter-rouge">src/contexts/</code> Directory</strong> </h4> <p>Contains React Contexts for global state management.</p> <ol> <li><strong><code class="language-plaintext highlighter-rouge">AuthContext.js</code></strong> <ul> <li><strong>Purpose</strong>: Provides global access to authentication-related data and functions throughout the application.</li> <li><strong>Functionality</strong>: Manages <code class="language-plaintext highlighter-rouge">user</code>, <code class="language-plaintext highlighter-rouge">hospital</code>, <code class="language-plaintext highlighter-rouge">authToken</code>, and <code class="language-plaintext highlighter-rouge">loading</code> states. It offers methods like <code class="language-plaintext highlighter-rouge">login</code>, <code class="language-plaintext highlighter-rouge">logout</code>, <code class="language-plaintext highlighter-rouge">updateAuth</code>, and <code class="language-plaintext highlighter-rouge">setPasswordfunc</code>. It also exposes derived states such as <code class="language-plaintext highlighter-rouge">isAuthenticated</code>, <code class="language-plaintext highlighter-rouge">isSuperuser</code>, <code class="language-plaintext highlighter-rouge">isApprover</code>, <code class="language-plaintext highlighter-rouge">isResponder</code>, <code class="language-plaintext highlighter-rouge">isCreator</code>, and <code class="language-plaintext highlighter-rouge">isRaiser</code>.</li> <li><strong>Usage</strong>: The <code class="language-plaintext highlighter-rouge">useAuth</code> hook is used to consume this context.</li> </ul> </li> <li><strong><code class="language-plaintext highlighter-rouge">FlutterContext.jsx</code></strong> <ul> <li><strong>Purpose</strong>: Provides a mechanism for the React app to <strong>communicate with its Flutter host</strong> when embedded within a WebView.</li> <li><strong>Functionality</strong>: Offers methods like <code class="language-plaintext highlighter-rouge">sendToFlutter</code>, <code class="language-plaintext highlighter-rouge">updateUserInFlutter</code>, and <code class="language-plaintext highlighter-rouge">showFlutterMessage</code>, which send messages to the Flutter <code class="language-plaintext highlighter-rouge">ReactToFlutter</code> JavaScript channel.</li> </ul> </li> </ol><hr /> <h4 id="srchooks-directory"> <a href="#srchooks-directory" class="anchor-heading" aria-labelledby="srchooks-directory"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <strong><code class="language-plaintext highlighter-rouge">src/hooks/</code> Directory</strong> </h4> <p>Contains custom React hooks for reusable logic.</p> <ol> <li><strong><code class="language-plaintext highlighter-rouge">useAuth.js</code></strong> <ul> <li><strong>Purpose</strong>: A custom hook that simplifies access to the <code class="language-plaintext highlighter-rouge">AuthContext</code> data and functions.</li> <li><strong>Usage</strong>: Ensures that the <code class="language-plaintext highlighter-rouge">useAuth</code> hook is called within an <code class="language-plaintext highlighter-rouge">AuthProvider</code>.</li> </ul> </li> <li><strong><code class="language-plaintext highlighter-rouge">useCrud.jsx</code></strong> <ul> <li><strong>Purpose</strong>: A generic custom hook for abstracting common Create, Read, Update, and Delete (CRUD) operations for different entities.</li> <li><strong>Functionality</strong>: Takes an <code class="language-plaintext highlighter-rouge">entityType</code> (e.g., ‘users’, ‘roles’) and provides <code class="language-plaintext highlighter-rouge">data</code>, <code class="language-plaintext highlighter-rouge">loading</code>, <code class="language-plaintext highlighter-rouge">error</code>, <code class="language-plaintext highlighter-rouge">fetchData</code>, <code class="language-plaintext highlighter-rouge">createItem</code>, <code class="language-plaintext highlighter-rouge">updateItem</code>, and <code class="language-plaintext highlighter-rouge">deleteItem</code> functions, leveraging <code class="language-plaintext highlighter-rouge">apiService</code> from <code class="language-plaintext highlighter-rouge">useAuth</code>.</li> </ul> </li> <li><strong><code class="language-plaintext highlighter-rouge">useForm.jsx</code></strong> <ul> <li><strong>Purpose</strong>: A custom hook for managing form state, input changes, blur events, and validation based on a provided schema.</li> <li><strong>Functionality</strong>: Provides <code class="language-plaintext highlighter-rouge">values</code>, <code class="language-plaintext highlighter-rouge">errors</code>, <code class="language-plaintext highlighter-rouge">touched</code>, <code class="language-plaintext highlighter-rouge">handleChange</code>, <code class="language-plaintext highlighter-rouge">handleBlur</code>, <code class="language-plaintext highlighter-rouge">validate</code>, <code class="language-plaintext highlighter-rouge">reset</code>, and <code class="language-plaintext highlighter-rouge">setValues</code> for streamlined form handling. It includes specific casting for role selection to integer.</li> </ul> </li> </ol><hr /> <h4 id="srcservices-directory"> <a href="#srcservices-directory" class="anchor-heading" aria-labelledby="srcservices-directory"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <strong><code class="language-plaintext highlighter-rouge">src/services/</code> Directory</strong> </h4> <p>Contains services for interacting with external APIs.</p> <ol> <li><strong><code class="language-plaintext highlighter-rouge">api.js</code> (ApiService)</strong> <ul> <li><strong>Purpose</strong>: A centralized class that handles all interactions with the Django REST Framework backend API.</li> <li><strong>Key Functionality</strong>: <ul> <li><strong>Base URL Management</strong>: Configures the <code class="language-plaintext highlighter-rouge">baseURL</code> for API requests, defaulting to <code class="language-plaintext highlighter-rouge">https://app.memotrack.net/</code> or using <code class="language-plaintext highlighter-rouge">process.env.BACKEND_URL</code>.</li> <li><strong>Request Handling</strong>: The <code class="language-plaintext highlighter-rouge">request</code> method supports GET, POST, PATCH, and DELETE HTTP methods, and automatically attaches the <code class="language-plaintext highlighter-rouge">Authorization</code> header with the JWT token retrieved from <code class="language-plaintext highlighter-rouge">localStorage</code>.</li> <li><strong>Specific Endpoints</strong>: Provides methods for various API interactions, including <code class="language-plaintext highlighter-rouge">login</code>, <code class="language-plaintext highlighter-rouge">logout</code>, <code class="language-plaintext highlighter-rouge">setPassword</code>, <code class="language-plaintext highlighter-rouge">getHospital</code>, <code class="language-plaintext highlighter-rouge">getUsers</code>, <code class="language-plaintext highlighter-rouge">createUser</code>, <code class="language-plaintext highlighter-rouge">updateUser</code>, <code class="language-plaintext highlighter-rouge">deleteUser</code>, and similar operations for roles, blocks, shifts, approver hierarchies, memos, worker statuses, and wards. It also includes <code class="language-plaintext highlighter-rouge">refreshOTP</code>.</li> </ul> </li> </ul> </li> </ol><hr /> <h4 id="srcutils-directory"> <a href="#srcutils-directory" class="anchor-heading" aria-labelledby="srcutils-directory"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <strong><code class="language-plaintext highlighter-rouge">src/utils/</code> Directory</strong> </h4> <p>Contains general utility functions and constants.</p> <ol> <li><strong><code class="language-plaintext highlighter-rouge">constants.js</code></strong> <ul> <li><strong>Purpose</strong>: Stores constants such as API endpoints and local storage keys for easy management and consistency across the application.</li> <li><strong>Details</strong>: Defines <code class="language-plaintext highlighter-rouge">API_ENDPOINTS</code> (e.g., <code class="language-plaintext highlighter-rouge">HOSPITALS</code>, <code class="language-plaintext highlighter-rouge">TOKEN_AUTH</code>, <code class="language-plaintext highlighter-rouge">USERS</code>), <code class="language-plaintext highlighter-rouge">USER_ROLES</code> (e.g., <code class="language-plaintext highlighter-rouge">SUPERUSER</code>, <code class="language-plaintext highlighter-rouge">APPROVER</code>, <code class="language-plaintext highlighter-rouge">RESPONDER</code>, <code class="language-plaintext highlighter-rouge">RAISER</code>), and <code class="language-plaintext highlighter-rouge">LOCAL_STORAGE_KEYS</code> (<code class="language-plaintext highlighter-rouge">authToken</code>, <code class="language-plaintext highlighter-rouge">user</code>, <code class="language-plaintext highlighter-rouge">selectedHospital</code>).</li> </ul> </li> </ol> </main> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
